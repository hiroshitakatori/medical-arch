# システム調査結果

## 基本調査結果

| 項目 | カテゴリ | 状況 | 詳細 | 優先度 | 対応工数 |
|------|---------|------|------|--------|----------|
| アプリケーションの場所 | システム構成 | 正常 | `/medical-arc/medical-arch-call-system-backend` | 低 | 0時間 |
| 施設管理フロント | システム構成 | 正常 | `/medical-arc/on-call-system-facility` | 低 | 0時間 |
| スタッフ用フロント | システム構成 | 正常 | `/var/www/medical-arch.com` | 低 | 0時間 |
| PM2プロセス1 | プロセス管理 | 正常 | `npm start api` (ポート8001) | 低 | 0時間 |
| PM2プロセス2 | プロセス管理 | 正常 | `npx serve -s build -p 3001` | 低 | 0時間 |
| PM2プロセス3 | プロセス管理 | 正常 | `npx serve -s build -p 3002` | 低 | 0時間 |
| NODE_ENV設定 | 設定 | 要改善 | 未設定 | 中 | 0.5時間 |
| PORT設定 | 設定 | 正常 | 8001 | 低 | 0時間 |
| 設定ファイル | 設定 | 正常 | `production.json` | 低 | 0時間 |
| Redis接続 | データベース | 正常 | PONG応答 | 低 | 0時間 |
| MongoDB接続 | データベース | 要確認 | mongoコマンド未インストール | 中 | 1時間 |
| Twilio連携 | 外部サービス | 正常 | API応答正常 | 低 | 0時間 |
| SendGrid連携 | 外部サービス | 正常 | API応答正常 | 低 | 0時間 |
| アプリケーションログ | ログ管理 | 要改善 | ログディレクトリなし | 高 | 1時間 |
| PM2ログ | ログ管理 | 正常 | `/root/.pm2/logs/` | 低 | 0時間 |
| Nginxログ | ログ管理 | 要改善 | アクセスログなし | 高 | 1時間 |
| システムログ | ログ管理 | 正常 | journalctlで確認可能 | 低 | 0時間 |
| Cron設定 | バックアップ | 要改善 | 設定なし | 中 | 2時間 |
| システムバックアップ | バックアップ | 正常 | `/var/backups/` | 低 | 0時間 |
| アプリケーションバックアップ | バックアップ | 要改善 | 設定なし | 中 | 2時間 |
| MongoDBバックアップ | バックアップ | 要確認 | クライアント未インストール | 中 | 1時間 |
| Nginx設定 | Webサーバー | 正常 | `/etc/nginx/sites-available/medical-arch` | 低 | 0時間 |
| SSL証明書 | Webサーバー | 正常 | Let's Encrypt証明書有効 | 低 | 0時間 |
| ドメイン設定 | Webサーバー | 正常 | 3つのサブドメイン設定済み | 低 | 0時間 |
| リバースプロキシ | Webサーバー | 正常 | 適切な設定 | 低 | 0時間 |
| UFWファイアウォール | セキュリティ | 正常 | ポート80,10022のみ開放 | 低 | 0時間 |
| iptables | セキュリティ | 正常 | UFWで管理 | 低 | 0時間 |
| ブロックされたIP | セキュリティ | 正常 | 攻撃IPをブロック | 低 | 0時間 |
| 攻撃の痕跡 | セキュリティ | 要注意 | PM2ログでWordPress攻撃の痕跡 | 高 | 2時間 |
| PM2バージョン | メンテナンス | 要改善 | 古いバージョン | 中 | 0.5時間 |
| Node.js警告 | メンテナンス | 要改善 | `Buffer()`の非推奨警告 | 中 | 1時間 |
| MongoDB警告 | メンテナンス | 要改善 | `collection.remove`の非推奨警告 | 中 | 1時間 |

## 調査日

2025年10月（引き継ぎ時）

