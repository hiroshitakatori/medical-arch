# Medical Arch コールシステム 仕様書

## 1. システム概要

Medical Arch コールシステムは、医療施設向けのオンコール（当直）管理システムです。電話転送機能、シフト管理、レポート管理などを提供します。

### 1.1 システム構成

- **バックエンド**: Node.js + Express + TypeScript + MongoDB
- **管理画面フロントエンド**: React + Ant Design
- **施設画面フロントエンド**: React + Ant Design
- **外部サービス**: Twilio（電話転送）、Firebase（認証）、Redis（キャッシュ）

### 1.2 主要コンポーネント

1. **バックエンド** (`medical-arch-call-system-backend-master`)
2. **管理画面** (`on-call-system-front-master`)
3. **施設画面** (`on-call-system-facility-master`)

---

## 2. 管理画面（on-call-system-front-master）

### 2.1 認証関連

#### 2.1.1 ログイン画面 (`/login`)
- **機能**: 管理者のログイン
- **処理**: メールアドレスとパスワードで認証
- **API**: `POST /admin/login`

#### 2.1.2 新規登録画面 (`/register`)
- **機能**: 新規管理者アカウントの作成
- **処理**: 
  - 基本情報入力
  - OTP（ワンタイムパスワード）送信
  - OTP検証
- **API**: 
  - `POST /admin/register`
  - `POST /admin/otp/verify/signup`
  - `POST /admin/otp/resend`

#### 2.1.3 パスワードリセット
- **機能**: パスワード忘れ時のリセット
- **処理**:
  1. メールアドレス入力 (`/forgot-password`)
  2. OTP送信・検証 (`/otp-verification`)
  3. パスワードリセット (`/reset-password`)
- **API**:
  - `POST /admin/otp/get`
  - `POST /admin/otp/verify`
  - `POST /admin/forgotPassword`

#### 2.1.4 ログアウト
- **機能**: セッション終了
- **API**: `PATCH /admin/logout`

### 2.2 ダッシュボード (`/`)

#### 機能概要
- コール履歴の表示
- レポート一覧の表示
- ミスコール履歴の表示
- シフト応答者（Responder）の表示

#### 主要機能
1. **コール履歴テーブル**
   - ページネーション対応
   - 検索機能
   - コール録音のダウンロード
   - コール詳細の表示

2. **レポート一覧**
   - レポート一覧の表示
   - ページネーション対応

3. **ミスコール履歴**
   - 未応答コールの表示
   - 削除機能

4. **シフト応答者**
   - 現在のシフト担当者一覧
   - リアルタイム更新

### 2.3 施設管理

#### 2.3.1 施設一覧 (`/facility-list`)
- **機能**: 登録施設の一覧表示
- **表示項目**:
  - 施設名
  - メールアドレス
  - 電話番号
  - 契約状況
  - ステータス（有効/無効）
- **操作**:
  - 施設詳細への遷移
  - 新規施設追加への遷移
  - 施設検索
- **API**: `GET /admin/facilityList`

#### 2.3.2 施設詳細 (`/facility-details`)
- **機能**: 選択した施設の詳細情報表示
- **表示項目**:
  - 基本情報（名前、メール、電話番号、住所）
  - 契約情報（契約開始日、更新日、契約書）
  - プラン情報
  - 関連スタッフ
  - コール履歴
- **操作**:
  - 施設編集
  - 施設削除
  - ステータス変更
- **API**: `GET /admin/getFacility`

#### 2.3.3 施設追加 (`/add-facility`)
- **機能**: 新規施設の登録
- **入力項目**:
  - 基本情報（名前、メール、電話番号、住所）
  - 契約情報（契約開始日、契約書アップロード）
  - プラン選択
  - ビジネスタイプ
- **API**: `POST /admin/addFacility`

#### 2.3.4 施設編集 (`/edit-facility`)
- **機能**: 既存施設情報の更新
- **API**: `POST /admin/updateFacility`

#### 2.3.5 施設契約解除検索 (`/cancel-facility-search`)
- **機能**: 契約解除対象施設の検索

#### 2.3.6 施設契約解除 (`/cancel-facility`)
- **機能**: 施設との契約解除処理
- **API**: `POST /admin/cancelFacilityContract`

#### 2.3.7 施設承認 (`/confirmation-facility`)
- **機能**: 新規登録施設の承認処理

### 2.4 スタッフ管理

#### 2.4.1 スタッフ一覧 (`/staff-list`)
- **機能**: 登録スタッフの一覧表示
- **表示項目**:
  - スタッフ名
  - メールアドレス
  - 電話番号
  - ロール
  - ステータス
- **操作**:
  - スタッフ詳細への遷移
  - 新規スタッフ追加への遷移
  - 検索・フィルタリング
- **API**: `GET /admin/StaffList`

#### 2.4.2 スタッフ詳細 (`/staff-details`)
- **機能**: 選択したスタッフの詳細情報表示
- **表示項目**:
  - 基本情報
  - シフト情報
  - コール履歴
- **操作**:
  - スタッフ編集
  - スタッフ削除
  - ステータス変更
- **API**: `GET /admin/getStaff`

#### 2.4.3 スタッフ追加 (`/add-staff`)
- **機能**: 新規スタッフの登録
- **入力項目**:
  - 基本情報（名前、メール、電話番号）
  - ロール選択
  - パスワード
- **API**: `POST /admin/addStaff`

#### 2.4.4 スタッフ編集 (`/edit-staff`)
- **機能**: 既存スタッフ情報の更新
- **API**: `POST /admin/updateStaff`

#### 2.4.5 スタッフ承認 (`/confirmation-staff`)
- **機能**: 新規登録スタッフの承認処理

#### 2.4.6 スタッフ削除
- **API**: `DELETE /admin/deleteStaff/:_id`

#### 2.4.7 スタッフステータス変更
- **API**: `PUT /admin/changeStatusStaff/:_id`

### 2.5 シフト管理

#### 2.5.1 シフト一覧 (`/shift-list`)
- **機能**: シフトの一覧表示
- **表示項目**:
  - シフト名
  - 開始時間
  - 終了時間
  - ステータス（有効/無効）
- **操作**:
  - シフト追加
  - シフト編集
  - シフト削除
  - ステータス変更
- **API**: `GET /admin/getShift`

#### 2.5.2 シフト追加 (`/add-shift`)
- **機能**: 新規シフトの作成
- **入力項目**:
  - シフト名
  - 開始時間
  - 終了時間
  - 表示順序
- **API**: `POST /admin/shiftAdd`

#### 2.5.3 シフト編集
- **API**: `POST /admin/shiftUpdate/:_id`

#### 2.5.4 シフト削除
- **API**: `DELETE /admin/deleteShift/:_id`

#### 2.5.5 シフトステータス変更（有効/無効）
- **API**: `POST /admin/activeInactiveShift/:_id`

#### 2.5.6 スタッフシフト管理
- **機能**: スタッフにシフトを割り当て
- **API**:
  - `POST /admin/addStaffShift`: スタッフシフト追加
  - `POST /admin/updateStaffShift`: スタッフシフト更新
  - `GET /admin/staffShift`: スタッフシフト取得
  - `GET /admin/shiftByStaffId`: スタッフID別シフト取得

#### 2.5.7 利用可能スタッフ取得
- **機能**: 現在利用可能なスタッフ一覧を取得
- **API**: `GET /admin/getAvailableStaff`

### 2.6 レポート管理

#### 2.6.1 レポート一覧 (`/report-list`)
- **機能**: 全レポートの一覧表示
- **表示項目**:
  - 施設名
  - 入居者名
  - レポートタイプ
  - 作成日時
  - ステータス
- **操作**:
  - レポート詳細への遷移
  - 新規レポート追加への遷移
  - 検索・フィルタリング
- **API**: `GET /admin/getReport`

#### 2.6.2 レポート詳細 (`/report-details`)
- **機能**: 選択したレポートの詳細情報表示
- **表示項目**:
  - 基本情報（施設名、入居者名）
  - バイタル情報（体温、血圧、脈拍、SpO2）
  - 症状情報
  - メモ
  - コメント履歴
- **操作**:
  - レポート編集
  - コメント追加
- **API**: `GET /admin/getReport`

#### 2.6.3 レポート追加 (`/add-report`)
- **機能**: 新規レポートの作成
- **入力項目**:
  - 施設情報
  - 入居者情報
  - バイタル情報
  - 症状情報
  - メモ
- **API**: `POST /admin/addReport`

#### 2.6.4 レポート編集 (`/edit-report`)
- **機能**: 既存レポートの更新
- **API**: `POST /admin/updateReport`

#### 2.6.5 レポート承認 (`/confirmation-report`)
- **機能**: レポートの承認処理

#### 2.6.6 レポートコメント
- **機能**: レポートへのコメント追加
- **API**: `POST /admin/commentOnReport`

#### 2.6.7 施設別レポート取得
- **API**: `GET /admin/reportByFacilityId`

### 2.7 ログ管理

#### 2.7.1 ログ一覧 (`/log-list`)
- **機能**: システムログの表示
- **表示項目**:
  - ログタイプ
  - 実行ユーザー
  - 実行日時
  - 詳細情報

### 2.8 コール履歴管理

#### 2.8.1 コール履歴一覧
- **機能**: 全コール履歴の表示（ダッシュボードにも表示）
- **表示項目**:
  - 発信元番号
  - 受信先番号
  - 通話時間
  - 通話日時
  - ステータス
- **操作**:
  - 録音ダウンロード
  - 詳細表示
- **API**: `GET /admin/callHistory`

#### 2.8.2 ミスコール履歴
- **機能**: 未応答コールの表示
- **API**: `GET /admin/missedCallHistory`

#### 2.8.3 施設別コール履歴
- **API**: `GET /admin/callHistoryByFacilityId`

#### 2.8.4 コール録音ダウンロード
- **API**: `GET /admin/callRecording`

#### 2.8.5 ミスコール削除
- **API**: `POST /admin/deleteMissCall`

### 2.9 マイページ (`/mypage`)

#### 機能
- プロフィール情報の表示・編集
- パスワード変更
- **API**: 
  - `GET /admin/getProfile`
  - `POST /admin/updateprofile`
  - `POST /admin/changePassword`

### 2.10 ロール・権限管理

#### 2.10.1 ロール管理
- **API**:
  - `POST /admin/roleAdd`: ロール追加
  - `GET /admin/roleEdit`: ロール編集情報取得
  - `PUT /admin/roleUpdate/:_id`: ロール更新
  - `GET /admin/getRole`: ロール一覧取得
  - `PUT /admin/activeInactiveRole/:_id`: ロール有効/無効化
  - `DELETE /admin/deleteRole/:_id`: ロール削除

#### 2.10.2 権限管理
- **API**:
  - `POST /admin/permissionAdd`: 権限追加
  - `PUT /admin/permissionUpdate/:_id`: 権限更新
  - `GET /admin/getPermission`: 権限一覧取得
  - `DELETE /admin/deletePermission/:_id`: 権限削除
  - `PUT /admin/activeInactivePermission/:_id`: 権限有効/無効化

---

## 3. 施設画面（on-call-system-facility-master）

### 3.1 認証関連

#### 3.1.1 ログイン画面 (`/login`)
- **機能**: 施設ユーザーのログイン
- **API**: `POST /facility/login`

#### 3.1.2 新規登録画面 (`/register`)
- **機能**: 新規施設アカウントの作成
- **処理**: OTP認証を含む

#### 3.1.3 パスワードリセット
- **機能**: パスワード忘れ時のリセット
- **API**:
  - `POST /facility/otp/get`
  - `POST /facility/otp/verify`
  - `POST /facility/forgotPassword`

#### 3.1.4 パスワード設定 (`/setting-password`)
- **機能**: 初回ログイン時のパスワード設定

#### 3.1.5 ログアウト
- **API**: `PATCH /facility/logout`

### 3.2 ダッシュボード (`/`)

#### 機能概要
- 施設専用のダッシュボード
- レポート一覧の表示
- 施設情報の表示

### 3.3 レポート管理

#### 3.3.1 レポート一覧 (`/facility-report`)
- **機能**: 当該施設のレポート一覧表示
- **API**: `GET /facility/reportByFacilityId`

#### 3.3.2 レポート詳細 (`/facility-report-details`)
- **機能**: レポートの詳細表示
- **表示項目**:
  - 入居者情報
  - バイタル情報
  - 症状情報
  - コメント

#### 3.3.3 レポートコメント (`/facility-report-comment`)
- **機能**: レポートへのコメント追加・閲覧

### 3.4 施設情報管理

#### 3.4.1 施設編集 (`/edit-facility`)
- **機能**: 施設情報の編集
- **API**: `POST /facility/updateFacility`

#### 3.4.2 施設情報取得
- **API**: `GET /facility/getFacility`

#### 3.4.3 施設承認 (`/confirmation-facility`)
- **機能**: 施設情報の承認

### 3.5 マイページ (`/facility-mypage`)

#### 機能
- プロフィール情報の表示・編集
- パスワード変更
- **API**: `GET /facility/getProfile`

---

## 4. バックエンドAPI

### 4.1 認証・ユーザー管理 (`/admin`)

#### 4.1.1 ユーザー認証
- `POST /admin/register`: 新規登録
- `POST /admin/login`: ログイン
- `PATCH /admin/logout`: ログアウト
- `POST /admin/otp/verify/signup`: サインアップOTP検証
- `POST /admin/otp/resend`: OTP再送信

#### 4.1.2 パスワード管理
- `POST /admin/otp/get`: OTP取得
- `POST /admin/otp/verify`: OTP検証
- `POST /admin/forgotPassword`: パスワードリセット
- `POST /admin/changePassword`: パスワード変更

#### 4.1.3 プロフィール管理
- `GET /admin/getProfile`: プロフィール取得
- `POST /admin/updateprofile`: プロフィール更新

#### 4.1.4 スタッフ管理
- `POST /admin/addStaff`: スタッフ追加
- `POST /admin/updateStaff`: スタッフ更新
- `DELETE /admin/deleteStaff/:_id`: スタッフ削除
- `PUT /admin/changeStatusStaff/:_id`: スタッフステータス変更
- `GET /admin/getStaff`: スタッフ取得
- `GET /admin/StaffList`: スタッフ一覧取得

#### 4.1.5 施設管理
- `POST /admin/addFacility`: 施設追加
- `POST /admin/updateFacility`: 施設更新
- `DELETE /admin/deleteFacility/:_id`: 施設削除
- `PUT /admin/changeStatusFacility/:_id`: 施設ステータス変更
- `POST /admin/cancelFacilityContract`: 施設契約解除
- `GET /admin/getFacility`: 施設取得
- `GET /admin/facilityList`: 施設一覧取得
- `GET /admin/allfacilityList`: 全施設一覧取得

#### 4.1.6 コール履歴
- `GET /admin/callHistory`: コール履歴取得
- `GET /admin/callRecording`: コール録音ダウンロード
- `GET /admin/callHistoryByFacilityId`: 施設別コール履歴取得
- `GET /admin/missedCallHistory`: ミスコール履歴取得
- `POST /admin/deleteMissCall`: ミスコール削除

### 4.2 施設管理API (`/facility`)

#### 4.2.1 認証
- `POST /facility/login`: ログイン
- `PATCH /facility/logout`: ログアウト
- `POST /facility/otp/get`: OTP取得
- `POST /facility/otp/verify`: OTP検証
- `POST /facility/forgotPassword`: パスワードリセット
- `POST /facility/changePassword`: パスワード変更

#### 4.2.2 プロフィール
- `GET /facility/getProfile`: プロフィール取得
- `POST /facility/updateFacility`: 施設情報更新
- `GET /facility/getFacility`: 施設情報取得

### 4.3 シフト管理 (`/admin`)

#### 4.3.1 シフト管理
- `POST /admin/shiftAdd`: シフト追加
- `POST /admin/shiftUpdate/:_id`: シフト更新
- `POST /admin/activeInactiveShift/:_id`: シフト有効/無効化
- `GET /admin/getShift`: シフト一覧取得
- `DELETE /admin/deleteShift/:_id`: シフト削除

#### 4.3.2 スタッフシフト管理
- `POST /admin/addStaffShift`: スタッフシフト追加
- `POST /admin/updateStaffShift`: スタッフシフト更新
- `POST /admin/addStaffShift2`: スタッフシフト追加（バージョン2）
- `GET /admin/staffShift`: スタッフシフト取得
- `GET /admin/shiftByStaffId`: スタッフID別シフト取得
- `GET /admin/shiftByStaffId2`: スタッフID別シフト取得（バージョン2）

#### 4.3.3 利用可能スタッフ
- `GET /admin/getAvailableStaff`: 利用可能スタッフ取得
- `GET /admin/responderShift`: 応答者シフト取得（公開API）
- `GET /admin/checkCallForward`: コール転送チェック

#### 4.3.4 症状管理
- `POST /admin/symptomsAdd`: 症状追加
- `GET /admin/symptoms`: 症状一覧取得（公開API）

### 4.4 レポート管理 (`/admin`, `/facility`)

#### 4.4.1 レポート管理
- `POST /admin/addReport`: レポート追加
- `POST /admin/updateReport`: レポート更新
- `GET /admin/getReport`: レポート取得
- `GET /admin/reportByFacilityId`: 施設別レポート取得
- `POST /admin/commentOnReport`: レポートコメント追加

### 4.5 ロール・権限管理 (`/admin`)

#### 4.5.1 ロール管理
- `POST /admin/roleAdd`: ロール追加
- `GET /admin/roleEdit`: ロール編集情報取得
- `PUT /admin/roleUpdate/:_id`: ロール更新
- `GET /admin/getRole`: ロール一覧取得
- `PUT /admin/activeInactiveRole/:_id`: ロール有効/無効化
- `DELETE /admin/deleteRole/:_id`: ロール削除

#### 4.5.2 権限管理
- `POST /admin/permissionAdd`: 権限追加
- `PUT /admin/permissionUpdate/:_id`: 権限更新
- `GET /admin/getPermission`: 権限一覧取得
- `DELETE /admin/deletePermission/:_id`: 権限削除
- `PUT /admin/activeInactivePermission/:_id`: 権限有効/無効化

### 4.6 コール転送API（公開）

#### 4.6.1 コール管理
- `GET /ecall/dynamic`: 動的スタッフ名取得
- `GET /ecall/dynamic/advance`: 動的スタッフ名取得（拡張版）
- `POST /ecall/welcome`: コール受付処理
- `POST /ecall/forward`: コール転送処理
- `POST /ecall/goodbye/:staff_id`: コール終了処理
- `POST /ecall/history`: コール履歴登録
- `GET /ecall/call-agent/:phone_no`: エージェントへのコール
- `POST /ecall/call-agent/:phone_no`: エージェントへのコール（POST）

### 4.7 共通機能

#### 4.7.1 画像アップロード
- `POST /uploadImage/:type`: 画像アップロード
- `POST /deleteImage`: 画像削除

#### 4.7.2 暗号化・復号化
- `POST /admin/encryption`: データ暗号化
- `POST /admin/decryption`: データ復号化

---

## 5. データモデル

### 5.1 ユーザー（User）
- `name`: 名前
- `uniqeId`: ユニークID
- `email`: メールアドレス
- `mobile`: 電話番号
- `profilePic`: プロフィール画像
- `password`: パスワード
- `role`: ロールID（参照）
- `address`: 住所
- `yomi`: 読み仮名
- `frigana`: フリガナ
- `contract`: 契約情報
- `license`: ライセンス情報
- `status`: ステータス（0: 無効, 1: 有効）

### 5.2 施設（Facility）
- `name`: 施設名
- `uniqeId`: ユニークID
- `email`: メールアドレス
- `mobile`: 電話番号
- `mobile2`: 電話番号2
- `password`: パスワード
- `address`: 住所
- `yomi`: 読み仮名
- `managerName`: 管理者名
- `facilityManagerName`: 施設管理者名
- `contractDetails`: 契約詳細
- `contract`: 契約書（ファイル）
- `contractStartDate`: 契約開始日
- `contractRenewDate`: 契約更新日
- `capacity`: 定員
- `businessType`: ビジネスタイプ
- `plan`: プランID（参照）
- `amount`: 金額
- `cost`: コスト
- `affiliatedFacility`: 関連施設ID（参照）
- `status`: ステータス

### 5.3 シフト（Shift）
- `name`: シフト名
- `startTime`: 開始時間
- `endTime`: 終了時間
- `order`: 表示順序
- `status`: ステータス（0: 無効, 1: 有効）

### 5.4 スタッフシフト（StaffShift）
- `shiftId`: シフトID（参照）
- `staffId`: スタッフID（参照）
- `startDay`: 開始日
- `callCount`: コール数
- その他のシフト関連情報

### 5.5 レポート（Report）
- `uniqeId`: ユニークID
- `facilityId`: 施設ID（参照）
- `nameOfFacility`: 施設名
- `address`: 住所
- `mobile`: 電話番号
- `email`: メールアドレス
- `staffId`: スタッフID
- `respondentId`: 応答者ID（参照）
- `respondentDate`: 応答日時
- `residentName`: 入居者名
- `temperature`: 体温
- `bp`: 血圧
- `pulse`: 脈拍
- `sp02`: SpO2
- `amountOfStool`: 便の量
- `respiratory`: 呼吸状態悪化（0: NO, 1: YES）
- `cyanosis`: チアノーゼ（0: NO, 1: YES）
- `reportType`: レポートタイプ（0: NO, 1: YES）
- `memo`: メモ
- その他の症状情報

### 5.6 ロール（Role）
- `name`: ロール名
- `permissions`: 権限リスト
- `status`: ステータス

### 5.7 権限（Permission）
- `name`: 権限名
- `description`: 説明
- `status`: ステータス

### 5.8 スタッフコールステータス（StaffCallStatus）
- `staffId`: スタッフID（参照）
- `shiftId`: シフトID（参照）
- `status`: ステータス（1: ビジー、接続中）

---

## 6. コール転送機能

### 6.1 コールフロー

1. **コール受付** (`/ecall/welcome`)
   - コール受付時の処理
   - 利用可能スタッフの検索
   - スタッフが利用可能な場合、転送処理を実行

2. **コール転送** (`/ecall/forward`)
   - 利用可能なスタッフへのコール転送
   - スタッフが利用不可の場合、エラーメッセージを返す

3. **エージェント接続** (`/ecall/call-agent/:phone_no`)
   - 指定された電話番号への接続
   - 録音機能付き
   - コール終了時のコールバック設定

4. **コール終了** (`/ecall/goodbye/:staff_id`)
   - コール終了時の処理
   - スタッフステータスの更新
   - コール履歴の記録

5. **コール履歴登録** (`/ecall/history`)
   - コール情報の履歴として保存

### 6.2 利用可能スタッフの判定

- 現在アクティブなシフトに属している
- 現在コール中でない（`StaffCallStatus`が存在しない）
- シフト時間内である

### 6.3 コール録音

- Twilioの録音機能を使用
- 録音ファイルは自動保存
- 管理画面からダウンロード可能

---

## 7. セキュリティ

### 7.1 認証
- JWT（JSON Web Token）を使用した認証
- トークンはCookieまたはヘッダーで送信
- アクセストークンとリフレッシュトークン

### 7.2 暗号化
- 機密データの暗号化機能
- AES暗号化を使用

### 7.3 権限管理
- ロールベースのアクセス制御（RBAC）
- 各機能へのアクセス権限を制御

### 7.4 CORS設定
- クロスオリジンリクエストの制御
- 許可されたオリジンのみアクセス可能

---

## 8. 外部サービス連携

### 8.1 Twilio
- 電話転送機能
- コール録音
- SMS送信（オプション）

### 8.2 Firebase
- プッシュ通知
- 認証補助

### 8.3 Redis
- セッション管理
- キャッシュ機能

### 8.4 MongoDB
- メインデータベース
- ユーザー、施設、シフト、レポートなどのデータを保存

---

## 9. 国際化対応

### 9.1 対応言語
- 日本語（ja）
- 英語（en）

### 9.2 多言語対応機能
- i18nextを使用した多言語対応
- 言語切り替え機能
- 日付フォーマットの言語別対応

---

## 10. 開発時の注意事項

### 10.1 仕様変更時の確認項目

1. **影響範囲の確認**
   - 変更する機能に関連する画面・APIの特定
   - データモデルへの影響確認
   - 他機能への副作用の確認

2. **整合性チェック**
   - 既存の仕様との矛盾がないか
   - API仕様とフロントエンド実装の整合性
   - データモデルとAPI仕様の整合性

3. **テスト項目**
   - 正常系の動作確認
   - 異常系の動作確認
   - エッジケースの確認

### 10.2 コード修正時のチェックリスト

- [ ] 関連する画面の動作確認
- [ ] 関連するAPIの動作確認
- [ ] データモデルの整合性確認
- [ ] 権限・認証の確認
- [ ] エラーハンドリングの確認
- [ ] 多言語対応の確認
- [ ] コール転送機能への影響確認

### 10.3 仕様書の更新

- 機能追加・変更時は必ず仕様書を更新
- API仕様変更時はエンドポイント情報を更新
- データモデル変更時はモデル定義を更新

---

## 11. 補足情報

### 11.1 ファイル構成

#### バックエンド
- `src/index.ts`: エントリーポイント
- `src/components/`: 各機能のコントローラー、モデル、ルート
- `src/middlewares/`: ミドルウェア（認証、暗号化など）
- `src/utils/`: ユーティリティ関数

#### 管理画面フロントエンド
- `src/components/view/pages/`: 画面コンポーネント
- `src/components/routes/`: ルーティング設定
- `src/security/`: セキュリティ関連（認証、HTTPクライアント）

#### 施設画面フロントエンド
- `src/components/view/pages/`: 画面コンポーネント
- `src/components/routes/`: ルーティング設定
- `src/security/`: セキュリティ関連

### 11.2 環境設定

- 開発環境: `config/development.json`
- ステージング環境: `config/staging.json`
- 本番環境: `config/production.json`

### 11.3 主要な設定項目

- データベース接続文字列
- Twilio認証情報
- Firebase設定
- Redis設定
- ポート番号
- CORS設定

---

## 12. 今後の拡張予定機能

- [ ] モバイルアプリ対応
- [ ] リアルタイム通知機能の強化
- [ ] レポートの分析機能
- [ ] ダッシュボードの統計情報拡充
- [ ] 自動シフト生成機能

---

**最終更新日**: 2025年1月
**バージョン**: 1.0

